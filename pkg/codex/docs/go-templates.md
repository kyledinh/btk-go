# Go Templates

- Load a template
- Create a Payload object, fill with data for the template
- Attach methods to the Payload object for template's use

gencode.go
```go

//go:embed templates
var TemplatesFS embed.FS

type Payload struct {
	SchemaName     string
	ModuleName     string
	Package        string
	GenVersion     string
	SpecVersion    string
	SpecFile       string
	GoSchema       codegen.Schema
	Imports        []string
	PubFieldLookup map[string]string
	PubFieldName   func(string) string
	FilterGoType   func(string) string
	FilterGoImport func(string) string
}


var payload = Payload{
    SchemaName:     schemaName,
    ModuleName:     "github.com/kyledinh/btk-cli-go",
    GenVersion:     config.Version,
    SpecVersion:    spec.Info.Version,
    SpecFile:       specFile,
    Package:        "model",
    GoSchema:       goSchema,
    Imports:        imports,
    PubFieldLookup: pubFieldLookup,
    PubFieldName:   PubCapitalize,
    FilterGoType:   FilterGoType,
    FilterGoImport: FilterGoImport,
}

tmpl, err := template.ParseFS(TemplatesFS, "templates/model.tmpl")
if err != nil {
    fmt.Println(err)
}

var buf bytes.Buffer
err = tmpl.Execute(&buf, payload)

```

templates/model.tmpl
```
// Code generated by {{.ModuleName}} (btk-cli) version {{.GenVersion}} 
// DO NOT EDIT. Edit in {{.SpecFile}} {{.SpecVersion}} then rerun generator.

package {{.Package}} 

import (
	_ "github.com/pkg/errors"
	{{range .Imports}}"{{.}}"
	{{end}}
)

type {{.SchemaName}} struct {

	{{range .GoSchema.Properties}}{{ (call $.PubFieldName .JsonFieldName) }} {{ (call $.FilterGoType .Schema.GoType) }} `json:"{{.JsonFieldName}}"` 
	{{end}}
}

```

## Reference 
* [Crash Course on Go Templates - video](https://www.youtube.com/watch?v=k5wJv4XO7a0)